"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/admin/login/route";
exports.ids = ["app/admin/login/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fadmin%2Flogin%2Froute&page=%2Fadmin%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fadmin%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fadmin%2Flogin%2Froute&page=%2Fadmin%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fadmin%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_antoi_source_repos_PERSO_PROJECT_PERSO_portfolio_app_admin_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/admin/login/route.ts */ \"(rsc)/./app/admin/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/admin/login/route\",\n        pathname: \"/admin/login\",\n        filename: \"route\",\n        bundlePath: \"app/admin/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\antoi\\\\source\\\\repos\\\\PERSO-PROJECT\\\\PERSO\\\\portfolio\\\\app\\\\admin\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_antoi_source_repos_PERSO_PROJECT_PERSO_portfolio_app_admin_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/admin/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhZG1pbiUyRmxvZ2luJTJGcm91dGUmcGFnZT0lMkZhZG1pbiUyRmxvZ2luJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYWRtaW4lMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhbnRvaSU1Q3NvdXJjZSU1Q3JlcG9zJTVDUEVSU08tUFJPSkVDVCU1Q1BFUlNPJTVDcG9ydGZvbGlvJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNhbnRvaSU1Q3NvdXJjZSU1Q3JlcG9zJTVDUEVSU08tUFJPSkVDVCU1Q1BFUlNPJTVDcG9ydGZvbGlvJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QztBQUMxSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1hbnRvaW5lLWxpbWFyZS8/NDYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxhbnRvaVxcXFxzb3VyY2VcXFxccmVwb3NcXFxcUEVSU08tUFJPSkVDVFxcXFxQRVJTT1xcXFxwb3J0Zm9saW9cXFxcYXBwXFxcXGFkbWluXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FkbWluL2xvZ2luL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hZG1pbi9sb2dpblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hZG1pbi9sb2dpbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGFudG9pXFxcXHNvdXJjZVxcXFxyZXBvc1xcXFxQRVJTTy1QUk9KRUNUXFxcXFBFUlNPXFxcXHBvcnRmb2xpb1xcXFxhcHBcXFxcYWRtaW5cXFxcbG9naW5cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYWRtaW4vbG9naW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fadmin%2Flogin%2Froute&page=%2Fadmin%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fadmin%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/admin/login/route.ts":
/*!**********************************!*\
  !*** ./app/admin/login/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n\nconst runtime = \"nodejs\";\nasync function POST(req) {\n    await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.ensureAdminUser)();\n    try {\n        const body = await req.json();\n        const email = typeof body?.email === \"string\" ? body.email.trim() : \"\";\n        const password = typeof body?.password === \"string\" ? body.password : \"\";\n        if (!email || !password) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Email et mot de passe requis.\"\n            }, {\n                status: 400\n            });\n        }\n        const user = _lib_db__WEBPACK_IMPORTED_MODULE_2__.userDb.getByEmail(email);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Identifiants invalides.\"\n            }, {\n                status: 401\n            });\n        }\n        const valid = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyPassword)(password, user.passwordHash);\n        if (!valid) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Identifiants invalides.\"\n            }, {\n                status: 401\n            });\n        }\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.signAuthToken)(user);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            token,\n            user: {\n                id: user.id,\n                email: user.email\n            }\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Requ\\xeate invalide.\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function GET(req) {\n    const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getAuthUserFromHeader)(req.headers.get(\"authorization\"));\n    if (!user) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Token invalide.\"\n        }, {\n            status: 401\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        user: {\n            id: user.id,\n            email: user.email\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYWRtaW4vbG9naW4vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdEO0FBQzJDO0FBQ2pFO0FBRTNCLE1BQU1NLFVBQVUsU0FBUztBQUV6QixlQUFlQyxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNUCwwREFBZUE7SUFFckIsSUFBSTtRQUNGLE1BQU1RLE9BQU8sTUFBTUQsSUFBSUUsSUFBSTtRQUMzQixNQUFNQyxRQUFRLE9BQU9GLE1BQU1FLFVBQVUsV0FBV0YsS0FBS0UsS0FBSyxDQUFDQyxJQUFJLEtBQUs7UUFDcEUsTUFBTUMsV0FBVyxPQUFPSixNQUFNSSxhQUFhLFdBQVdKLEtBQUtJLFFBQVEsR0FBRztRQUV0RSxJQUFJLENBQUNGLFNBQVMsQ0FBQ0UsVUFBVTtZQUN2QixPQUFPYixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFSSxPQUFPO1lBQWdDLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNyRjtRQUVBLE1BQU1DLE9BQU9YLDJDQUFNQSxDQUFDWSxVQUFVLENBQUNOO1FBQy9CLElBQUksQ0FBQ0ssTUFBTTtZQUNULE9BQU9oQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFSSxPQUFPO1lBQTBCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMvRTtRQUVBLE1BQU1HLFFBQVEsTUFBTWQseURBQWNBLENBQUNTLFVBQVVHLEtBQUtHLFlBQVk7UUFDOUQsSUFBSSxDQUFDRCxPQUFPO1lBQ1YsT0FBT2xCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVJLE9BQU87WUFBMEIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQy9FO1FBRUEsTUFBTUssUUFBUWpCLHdEQUFhQSxDQUFDYTtRQUM1QixPQUFPaEIscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFVTtZQUFPSixNQUFNO2dCQUFFSyxJQUFJTCxLQUFLSyxFQUFFO2dCQUFFVixPQUFPSyxLQUFLTCxLQUFLO1lBQUM7UUFBRTtJQUM3RSxFQUFFLE9BQU9HLE9BQVk7UUFDbkIsT0FBT2QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFSSxPQUFPO1FBQW9CLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3pFO0FBQ0Y7QUFFTyxlQUFlTyxJQUFJZCxHQUFnQjtJQUN4QyxNQUFNUSxPQUFPZCxnRUFBcUJBLENBQUNNLElBQUllLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ25ELElBQUksQ0FBQ1IsTUFBTTtRQUNULE9BQU9oQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVJLE9BQU87UUFBa0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDdkU7SUFDQSxPQUFPZixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1FBQUVNLE1BQU07WUFBRUssSUFBSUwsS0FBS0ssRUFBRTtZQUFFVixPQUFPSyxLQUFLTCxLQUFLO1FBQUM7SUFBRTtBQUN0RSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1hbnRvaW5lLWxpbWFyZS8uL2FwcC9hZG1pbi9sb2dpbi9yb3V0ZS50cz80MjQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBlbnN1cmVBZG1pblVzZXIsIGdldEF1dGhVc2VyRnJvbUhlYWRlciwgc2lnbkF1dGhUb2tlbiwgdmVyaWZ5UGFzc3dvcmQgfSBmcm9tICdAL2xpYi9hdXRoJztcbmltcG9ydCB7IHVzZXJEYiB9IGZyb20gJ0AvbGliL2RiJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBhd2FpdCBlbnN1cmVBZG1pblVzZXIoKTtcblxuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IGVtYWlsID0gdHlwZW9mIGJvZHk/LmVtYWlsID09PSAnc3RyaW5nJyA/IGJvZHkuZW1haWwudHJpbSgpIDogJyc7XG4gICAgY29uc3QgcGFzc3dvcmQgPSB0eXBlb2YgYm9keT8ucGFzc3dvcmQgPT09ICdzdHJpbmcnID8gYm9keS5wYXNzd29yZCA6ICcnO1xuXG4gICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRW1haWwgZXQgbW90IGRlIHBhc3NlIHJlcXVpcy4nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHVzZXJEYi5nZXRCeUVtYWlsKGVtYWlsKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSWRlbnRpZmlhbnRzIGludmFsaWRlcy4nIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgdXNlci5wYXNzd29yZEhhc2gpO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSWRlbnRpZmlhbnRzIGludmFsaWRlcy4nIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBzaWduQXV0aFRva2VuKHVzZXIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHRva2VuLCB1c2VyOiB7IGlkOiB1c2VyLmlkLCBlbWFpbDogdXNlci5lbWFpbCB9IH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdSZXF1w6p0ZSBpbnZhbGlkZS4nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHVzZXIgPSBnZXRBdXRoVXNlckZyb21IZWFkZXIocmVxLmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJykpO1xuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1Rva2VuIGludmFsaWRlLicgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgfVxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB1c2VyOiB7IGlkOiB1c2VyLmlkLCBlbWFpbDogdXNlci5lbWFpbCB9IH0pO1xufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZW5zdXJlQWRtaW5Vc2VyIiwiZ2V0QXV0aFVzZXJGcm9tSGVhZGVyIiwic2lnbkF1dGhUb2tlbiIsInZlcmlmeVBhc3N3b3JkIiwidXNlckRiIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsImVtYWlsIiwidHJpbSIsInBhc3N3b3JkIiwiZXJyb3IiLCJzdGF0dXMiLCJ1c2VyIiwiZ2V0QnlFbWFpbCIsInZhbGlkIiwicGFzc3dvcmRIYXNoIiwidG9rZW4iLCJpZCIsIkdFVCIsImhlYWRlcnMiLCJnZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/admin/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureAdminUser: () => (/* binding */ ensureAdminUser),\n/* harmony export */   generateDevSecret: () => (/* binding */ generateDevSecret),\n/* harmony export */   getAuthUserFromHeader: () => (/* binding */ getAuthUserFromHeader),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signAuthToken: () => (/* binding */ signAuthToken),\n/* harmony export */   verifyAuthToken: () => (/* binding */ verifyAuthToken),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\n\n\nconst authSecret = process.env.AUTH_SECRET || \"change-me-dev-secret\";\nconst saltRounds = 10;\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].hash(password, saltRounds);\n}\nasync function verifyPassword(password, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compare(password, hash);\n}\nfunction signAuthToken(user) {\n    const payload = {\n        userId: user.id,\n        email: user.email\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, authSecret, {\n        expiresIn: \"7d\"\n    });\n}\nfunction verifyAuthToken(token) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, authSecret);\n    } catch (error) {\n        return null;\n    }\n}\nasync function ensureAdminUser() {\n    const email = process.env.ADMIN_EMAIL || \"admin@example.com\";\n    const password = process.env.ADMIN_PASSWORD || \"change-me\";\n    const existing = _db__WEBPACK_IMPORTED_MODULE_3__.userDb.getByEmail(email);\n    if (existing) return existing;\n    const passwordHash = await hashPassword(password);\n    return _db__WEBPACK_IMPORTED_MODULE_3__.userDb.create(email, passwordHash);\n}\nfunction getAuthUserFromHeader(header) {\n    if (!header || !header.toLowerCase().startsWith(\"bearer \")) return null;\n    const token = header.slice(7);\n    const payload = verifyAuthToken(token);\n    if (!payload) return null;\n    const user = _db__WEBPACK_IMPORTED_MODULE_3__.userDb.getById(payload.userId);\n    return user ?? null;\n}\nfunction generateDevSecret() {\n    return (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes)(32).toString(\"hex\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQ047QUFDRDtBQUNhO0FBRTNDLE1BQU1JLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxJQUFJO0FBQzlDLE1BQU1DLGFBQWE7QUFJWixlQUFlQyxhQUFhQyxRQUFnQjtJQUNqRCxPQUFPUixxREFBVyxDQUFDUSxVQUFVRjtBQUMvQjtBQUVPLGVBQWVJLGVBQWVGLFFBQWdCLEVBQUVDLElBQVk7SUFDakUsT0FBT1Qsd0RBQWMsQ0FBQ1EsVUFBVUM7QUFDbEM7QUFFTyxTQUFTRyxjQUFjQyxJQUFZO0lBQ3hDLE1BQU1DLFVBQXdCO1FBQUVDLFFBQVFGLEtBQUtHLEVBQUU7UUFBRUMsT0FBT0osS0FBS0ksS0FBSztJQUFDO0lBQ25FLE9BQU9sQix3REFBUSxDQUFDZSxTQUFTWixZQUFZO1FBQUVpQixXQUFXO0lBQUs7QUFDekQ7QUFFTyxTQUFTQyxnQkFBZ0JDLEtBQWE7SUFDM0MsSUFBSTtRQUNGLE9BQU90QiwwREFBVSxDQUFDc0IsT0FBT25CO0lBQzNCLEVBQUUsT0FBT3FCLE9BQU87UUFDZCxPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE1BQU1QLFFBQVFkLFFBQVFDLEdBQUcsQ0FBQ3FCLFdBQVcsSUFBSTtJQUN6QyxNQUFNakIsV0FBV0wsUUFBUUMsR0FBRyxDQUFDc0IsY0FBYyxJQUFJO0lBQy9DLE1BQU1DLFdBQVcxQix1Q0FBTUEsQ0FBQzJCLFVBQVUsQ0FBQ1g7SUFDbkMsSUFBSVUsVUFBVSxPQUFPQTtJQUVyQixNQUFNRSxlQUFlLE1BQU10QixhQUFhQztJQUN4QyxPQUFPUCx1Q0FBTUEsQ0FBQzZCLE1BQU0sQ0FBQ2IsT0FBT1k7QUFDOUI7QUFFTyxTQUFTRSxzQkFBc0JDLE1BQXFCO0lBQ3pELElBQUksQ0FBQ0EsVUFBVSxDQUFDQSxPQUFPQyxXQUFXLEdBQUdDLFVBQVUsQ0FBQyxZQUFZLE9BQU87SUFDbkUsTUFBTWIsUUFBUVcsT0FBT0csS0FBSyxDQUFDO0lBQzNCLE1BQU1yQixVQUFVTSxnQkFBZ0JDO0lBQ2hDLElBQUksQ0FBQ1AsU0FBUyxPQUFPO0lBQ3JCLE1BQU1ELE9BQU9aLHVDQUFNQSxDQUFDbUMsT0FBTyxDQUFDdEIsUUFBUUMsTUFBTTtJQUMxQyxPQUFPRixRQUFRO0FBQ2pCO0FBRU8sU0FBU3dCO0lBQ2QsT0FBT3ZDLG1EQUFXQSxDQUFDLElBQUl3QyxRQUFRLENBQUM7QUFDbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8tYW50b2luZS1saW1hcmUvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJhbmRvbUJ5dGVzIH0gZnJvbSAnY3J5cHRvJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IHsgdXNlckRiLCB0eXBlIERiVXNlciB9IGZyb20gJy4vZGInO1xuXG5jb25zdCBhdXRoU2VjcmV0ID0gcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQgfHwgJ2NoYW5nZS1tZS1kZXYtc2VjcmV0JztcbmNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcblxudHlwZSBUb2tlblBheWxvYWQgPSB7IHVzZXJJZDogbnVtYmVyOyBlbWFpbDogc3RyaW5nIH07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZykge1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduQXV0aFRva2VuKHVzZXI6IERiVXNlcikge1xuICBjb25zdCBwYXlsb2FkOiBUb2tlblBheWxvYWQgPSB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwgfTtcbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIGF1dGhTZWNyZXQsIHsgZXhwaXJlc0luOiAnN2QnIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5QXV0aFRva2VuKHRva2VuOiBzdHJpbmcpOiBUb2tlblBheWxvYWQgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgYXV0aFNlY3JldCkgYXMgVG9rZW5QYXlsb2FkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVBZG1pblVzZXIoKSB7XG4gIGNvbnN0IGVtYWlsID0gcHJvY2Vzcy5lbnYuQURNSU5fRU1BSUwgfHwgJ2FkbWluQGV4YW1wbGUuY29tJztcbiAgY29uc3QgcGFzc3dvcmQgPSBwcm9jZXNzLmVudi5BRE1JTl9QQVNTV09SRCB8fCAnY2hhbmdlLW1lJztcbiAgY29uc3QgZXhpc3RpbmcgPSB1c2VyRGIuZ2V0QnlFbWFpbChlbWFpbCk7XG4gIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuXG4gIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGhhc2hQYXNzd29yZChwYXNzd29yZCk7XG4gIHJldHVybiB1c2VyRGIuY3JlYXRlKGVtYWlsLCBwYXNzd29yZEhhc2gpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aFVzZXJGcm9tSGVhZGVyKGhlYWRlcjogc3RyaW5nIHwgbnVsbCkge1xuICBpZiAoIWhlYWRlciB8fCAhaGVhZGVyLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnYmVhcmVyICcpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdG9rZW4gPSBoZWFkZXIuc2xpY2UoNyk7XG4gIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnlBdXRoVG9rZW4odG9rZW4pO1xuICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xuICBjb25zdCB1c2VyID0gdXNlckRiLmdldEJ5SWQocGF5bG9hZC51c2VySWQpO1xuICByZXR1cm4gdXNlciA/PyBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVEZXZTZWNyZXQoKSB7XG4gIHJldHVybiByYW5kb21CeXRlcygzMikudG9TdHJpbmcoJ2hleCcpO1xufVxuXG4iXSwibmFtZXMiOlsicmFuZG9tQnl0ZXMiLCJqd3QiLCJiY3J5cHQiLCJ1c2VyRGIiLCJhdXRoU2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkFVVEhfU0VDUkVUIiwic2FsdFJvdW5kcyIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsInNpZ25BdXRoVG9rZW4iLCJ1c2VyIiwicGF5bG9hZCIsInVzZXJJZCIsImlkIiwiZW1haWwiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5QXV0aFRva2VuIiwidG9rZW4iLCJ2ZXJpZnkiLCJlcnJvciIsImVuc3VyZUFkbWluVXNlciIsIkFETUlOX0VNQUlMIiwiQURNSU5fUEFTU1dPUkQiLCJleGlzdGluZyIsImdldEJ5RW1haWwiLCJwYXNzd29yZEhhc2giLCJjcmVhdGUiLCJnZXRBdXRoVXNlckZyb21IZWFkZXIiLCJoZWFkZXIiLCJ0b0xvd2VyQ2FzZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImdldEJ5SWQiLCJnZW5lcmF0ZURldlNlY3JldCIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   messageDb: () => (/* binding */ messageDb),\n/* harmony export */   projectDb: () => (/* binding */ projectDb),\n/* harmony export */   userDb: () => (/* binding */ userDb)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"projet_portfolio.db\");\n// Ensure the database file exists alongside the app\nif (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dbPath)) {\n    fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(dbPath, \"\");\n}\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_2___default())(dbPath);\n// Simple migration to keep schema in sync\ndb.exec(`\n  CREATE TABLE IF NOT EXISTS projects (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    title TEXT NOT NULL,\n    description TEXT NOT NULL,\n    stack TEXT,\n    features TEXT DEFAULT '[]',\n    image_path TEXT,\n    created_at TEXT DEFAULT (datetime('now')),\n    updated_at TEXT DEFAULT (datetime('now'))\n  );\n\n  CREATE TABLE IF NOT EXISTS users (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    email TEXT NOT NULL UNIQUE,\n    password_hash TEXT NOT NULL,\n    created_at TEXT DEFAULT (datetime('now'))\n  );\n\n  CREATE TABLE IF NOT EXISTS messages (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name TEXT NOT NULL,\n    email TEXT NOT NULL,\n    content TEXT NOT NULL,\n    created_at TEXT DEFAULT (datetime('now'))\n  );\n`);\nconst normaliseRow = (row)=>({\n        id: row.id,\n        title: row.title,\n        description: row.description,\n        stack: row.stack ?? null,\n        features: row.features ? JSON.parse(row.features) : [],\n        imagePath: row.image_path ?? null,\n        createdAt: row.created_at,\n        updatedAt: row.updated_at\n    });\nconst normaliseUser = (row)=>({\n        id: row.id,\n        email: row.email,\n        passwordHash: row.password_hash,\n        createdAt: row.created_at\n    });\nconst normaliseMessage = (row)=>({\n        id: row.id,\n        name: row.name,\n        email: row.email,\n        content: row.content,\n        createdAt: row.created_at\n    });\nconst projectDb = {\n    all () {\n        const rows = db.prepare(\"SELECT * FROM projects ORDER BY created_at DESC\").all();\n        return rows.map(normaliseRow);\n    },\n    get (id) {\n        const row = db.prepare(\"SELECT * FROM projects WHERE id = ?\").get(id);\n        return row ? normaliseRow(row) : undefined;\n    },\n    create (data) {\n        const stmt = db.prepare(`INSERT INTO projects (title, description, stack, features, image_path)\n       VALUES (@title, @description, @stack, @features, @image_path)`);\n        const featuresJson = JSON.stringify(data.features ?? []);\n        const info = stmt.run({\n            title: data.title,\n            description: data.description,\n            stack: data.stack ?? null,\n            features: featuresJson,\n            image_path: data.imagePath ?? null\n        });\n        const created = this.get(Number(info.lastInsertRowid));\n        if (!created) {\n            throw new Error(\"Project creation failed\");\n        }\n        return created;\n    },\n    update (id, data) {\n        const existing = this.get(id);\n        if (!existing) {\n            throw new Error(\"Project not found\");\n        }\n        const next = {\n            ...existing,\n            ...data,\n            features: data.features ?? existing.features,\n            imagePath: data.imagePath ?? existing.imagePath,\n            updatedAt: new Date().toISOString()\n        };\n        db.prepare(`UPDATE projects\n       SET title = @title,\n           description = @description,\n           stack = @stack,\n           features = @features,\n           image_path = @image_path,\n           updated_at = datetime('now')\n       WHERE id = @id`).run({\n            id,\n            title: next.title,\n            description: next.description,\n            stack: next.stack ?? null,\n            features: JSON.stringify(next.features ?? []),\n            image_path: next.imagePath ?? null\n        });\n        const updated = this.get(id);\n        if (!updated) {\n            throw new Error(\"Project update failed\");\n        }\n        return updated;\n    },\n    delete (id) {\n        const existing = this.get(id);\n        if (!existing) return undefined;\n        db.prepare(\"DELETE FROM projects WHERE id = ?\").run(id);\n        return existing;\n    }\n};\nconst userDb = {\n    getById (id) {\n        const row = db.prepare(\"SELECT * FROM users WHERE id = ?\").get(id);\n        return row ? normaliseUser(row) : undefined;\n    },\n    getByEmail (email) {\n        const row = db.prepare(\"SELECT * FROM users WHERE email = ?\").get(email);\n        return row ? normaliseUser(row) : undefined;\n    },\n    create (email, passwordHash) {\n        const stmt = db.prepare(`INSERT INTO users (email, password_hash) VALUES (?, ?)`);\n        const info = stmt.run(email, passwordHash);\n        const row = db.prepare(\"SELECT * FROM users WHERE id = ?\").get(Number(info.lastInsertRowid));\n        if (!row) {\n            throw new Error(\"User creation failed\");\n        }\n        return normaliseUser(row);\n    }\n};\nconst messageDb = {\n    all () {\n        const rows = db.prepare(\"SELECT * FROM messages ORDER BY created_at DESC\").all();\n        return rows.map(normaliseMessage);\n    },\n    create (data) {\n        const info = db.prepare(`INSERT INTO messages (name, email, content) VALUES (@name, @email, @content)`).run(data);\n        const row = db.prepare(\"SELECT * FROM messages WHERE id = ?\").get(Number(info.lastInsertRowid));\n        if (!row) {\n            throw new Error(\"Message creation failed\");\n        }\n        return normaliseMessage(row);\n    },\n    delete (id) {\n        const row = db.prepare(\"SELECT * FROM messages WHERE id = ?\").get(id);\n        if (!row) return undefined;\n        db.prepare(\"DELETE FROM messages WHERE id = ?\").run(id);\n        return normaliseMessage(row);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1oQixNQUFNSCxHQUFHMkIsT0FBTyxDQUFDLG9DQUFvQ0UsR0FBRyxDQUFDVSxPQUFPSCxLQUFLSSxlQUFlO1FBQzFGLElBQUksQ0FBQ3JDLEtBQUs7WUFDUixNQUFNLElBQUlzQyxNQUFNO1FBQ2xCO1FBQ0EsT0FBT3hCLGNBQWNkO0lBQ3ZCO0FBQ0YsRUFBRTtBQUVLLE1BQU1pRCxZQUFZO0lBQ3ZCM0I7UUFDRSxNQUFNQyxPQUFPMUIsR0FBRzJCLE9BQU8sQ0FBQyxtREFBbURGLEdBQUc7UUFDOUUsT0FBT0MsS0FBS0UsR0FBRyxDQUFDUDtJQUNsQjtJQUVBVSxRQUFPQyxJQUFtRDtRQUN4RCxNQUFNSSxPQUFPcEMsR0FDVjJCLE9BQU8sQ0FBQyxDQUFDLDRFQUE0RSxDQUFDLEVBQ3RGVSxHQUFHLENBQUNMO1FBQ1AsTUFBTTdCLE1BQU1ILEdBQUcyQixPQUFPLENBQUMsdUNBQXVDRSxHQUFHLENBQUNVLE9BQU9ILEtBQUtJLGVBQWU7UUFDN0YsSUFBSSxDQUFDckMsS0FBSztZQUNSLE1BQU0sSUFBSXNDLE1BQU07UUFDbEI7UUFDQSxPQUFPcEIsaUJBQWlCbEI7SUFDMUI7SUFFQTZDLFFBQU81QyxFQUFVO1FBQ2YsTUFBTUQsTUFBTUgsR0FBRzJCLE9BQU8sQ0FBQyx1Q0FBdUNFLEdBQUcsQ0FBQ3pCO1FBQ2xFLElBQUksQ0FBQ0QsS0FBSyxPQUFPMkI7UUFDakI5QixHQUFHMkIsT0FBTyxDQUFDLHFDQUFxQ1UsR0FBRyxDQUFDakM7UUFDcEQsT0FBT2lCLGlCQUFpQmxCO0lBQzFCO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1hbnRvaW5lLWxpbWFyZS8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBEYXRhYmFzZSBmcm9tICdiZXR0ZXItc3FsaXRlMyc7XG5cbmNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHJvamV0X3BvcnRmb2xpby5kYicpO1xuXG4vLyBFbnN1cmUgdGhlIGRhdGFiYXNlIGZpbGUgZXhpc3RzIGFsb25nc2lkZSB0aGUgYXBwXG5pZiAoIWZzLmV4aXN0c1N5bmMoZGJQYXRoKSkge1xuICBmcy53cml0ZUZpbGVTeW5jKGRiUGF0aCwgJycpO1xufVxuXG5leHBvcnQgdHlwZSBEYlByb2plY3QgPSB7XG4gIGlkOiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHN0YWNrOiBzdHJpbmcgfCBudWxsO1xuICBmZWF0dXJlczogc3RyaW5nW107XG4gIGltYWdlUGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRGJVc2VyID0ge1xuICBpZDogbnVtYmVyO1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZEhhc2g6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBEYk1lc3NhZ2UgPSB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn07XG5cbmNvbnN0IGRiID0gbmV3IERhdGFiYXNlKGRiUGF0aCk7XG5cbi8vIFNpbXBsZSBtaWdyYXRpb24gdG8ga2VlcCBzY2hlbWEgaW4gc3luY1xuZGIuZXhlYyhgXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2plY3RzIChcbiAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcbiAgICBkZXNjcmlwdGlvbiBURVhUIE5PVCBOVUxMLFxuICAgIHN0YWNrIFRFWFQsXG4gICAgZmVhdHVyZXMgVEVYVCBERUZBVUxUICdbXScsXG4gICAgaW1hZ2VfcGF0aCBURVhULFxuICAgIGNyZWF0ZWRfYXQgVEVYVCBERUZBVUxUIChkYXRldGltZSgnbm93JykpLFxuICAgIHVwZGF0ZWRfYXQgVEVYVCBERUZBVUxUIChkYXRldGltZSgnbm93JykpXG4gICk7XG5cbiAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICBlbWFpbCBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgICBwYXNzd29yZF9oYXNoIFRFWFQgTk9UIE5VTEwsXG4gICAgY3JlYXRlZF9hdCBURVhUIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSlcbiAgKTtcblxuICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtZXNzYWdlcyAoXG4gICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgIG5hbWUgVEVYVCBOT1QgTlVMTCxcbiAgICBlbWFpbCBURVhUIE5PVCBOVUxMLFxuICAgIGNvbnRlbnQgVEVYVCBOT1QgTlVMTCxcbiAgICBjcmVhdGVkX2F0IFRFWFQgREVGQVVMVCAoZGF0ZXRpbWUoJ25vdycpKVxuICApO1xuYCk7XG5cbmNvbnN0IG5vcm1hbGlzZVJvdyA9IChyb3c6IGFueSk6IERiUHJvamVjdCA9PiAoe1xuICBpZDogcm93LmlkLFxuICB0aXRsZTogcm93LnRpdGxlLFxuICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uLFxuICBzdGFjazogcm93LnN0YWNrID8/IG51bGwsXG4gIGZlYXR1cmVzOiByb3cuZmVhdHVyZXMgPyBKU09OLnBhcnNlKHJvdy5mZWF0dXJlcykgOiBbXSxcbiAgaW1hZ2VQYXRoOiByb3cuaW1hZ2VfcGF0aCA/PyBudWxsLFxuICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkX2F0LFxuICB1cGRhdGVkQXQ6IHJvdy51cGRhdGVkX2F0LFxufSk7XG5cbmNvbnN0IG5vcm1hbGlzZVVzZXIgPSAocm93OiBhbnkpOiBEYlVzZXIgPT4gKHtcbiAgaWQ6IHJvdy5pZCxcbiAgZW1haWw6IHJvdy5lbWFpbCxcbiAgcGFzc3dvcmRIYXNoOiByb3cucGFzc3dvcmRfaGFzaCxcbiAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbn0pO1xuXG5jb25zdCBub3JtYWxpc2VNZXNzYWdlID0gKHJvdzogYW55KTogRGJNZXNzYWdlID0+ICh7XG4gIGlkOiByb3cuaWQsXG4gIG5hbWU6IHJvdy5uYW1lLFxuICBlbWFpbDogcm93LmVtYWlsLFxuICBjb250ZW50OiByb3cuY29udGVudCxcbiAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbn0pO1xuXG5leHBvcnQgY29uc3QgcHJvamVjdERiID0ge1xuICBhbGwoKTogRGJQcm9qZWN0W10ge1xuICAgIGNvbnN0IHJvd3MgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NIHByb2plY3RzIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQycpLmFsbCgpO1xuICAgIHJldHVybiByb3dzLm1hcChub3JtYWxpc2VSb3cpO1xuICB9LFxuXG4gIGdldChpZDogbnVtYmVyKTogRGJQcm9qZWN0IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByb3cgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gPycpLmdldChpZCk7XG4gICAgcmV0dXJuIHJvdyA/IG5vcm1hbGlzZVJvdyhyb3cpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIGNyZWF0ZShkYXRhOiBPbWl0PERiUHJvamVjdCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogRGJQcm9qZWN0IHtcbiAgICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICAgIGBJTlNFUlQgSU5UTyBwcm9qZWN0cyAodGl0bGUsIGRlc2NyaXB0aW9uLCBzdGFjaywgZmVhdHVyZXMsIGltYWdlX3BhdGgpXG4gICAgICAgVkFMVUVTIChAdGl0bGUsIEBkZXNjcmlwdGlvbiwgQHN0YWNrLCBAZmVhdHVyZXMsIEBpbWFnZV9wYXRoKWAsXG4gICAgKTtcbiAgICBjb25zdCBmZWF0dXJlc0pzb24gPSBKU09OLnN0cmluZ2lmeShkYXRhLmZlYXR1cmVzID8/IFtdKTtcbiAgICBjb25zdCBpbmZvID0gc3RtdC5ydW4oe1xuICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgIHN0YWNrOiBkYXRhLnN0YWNrID8/IG51bGwsXG4gICAgICBmZWF0dXJlczogZmVhdHVyZXNKc29uLFxuICAgICAgaW1hZ2VfcGF0aDogZGF0YS5pbWFnZVBhdGggPz8gbnVsbCxcbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVkID0gdGhpcy5nZXQoTnVtYmVyKGluZm8ubGFzdEluc2VydFJvd2lkKSk7XG4gICAgaWYgKCFjcmVhdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2plY3QgY3JlYXRpb24gZmFpbGVkJyk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVkO1xuICB9LFxuXG4gIHVwZGF0ZShpZDogbnVtYmVyLCBkYXRhOiBQYXJ0aWFsPE9taXQ8RGJQcm9qZWN0LCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4+KTogRGJQcm9qZWN0IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2plY3Qgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbmV4dDogRGJQcm9qZWN0ID0ge1xuICAgICAgLi4uZXhpc3RpbmcsXG4gICAgICAuLi5kYXRhLFxuICAgICAgZmVhdHVyZXM6IGRhdGEuZmVhdHVyZXMgPz8gZXhpc3RpbmcuZmVhdHVyZXMsXG4gICAgICBpbWFnZVBhdGg6IGRhdGEuaW1hZ2VQYXRoID8/IGV4aXN0aW5nLmltYWdlUGF0aCxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH07XG5cbiAgICBkYi5wcmVwYXJlKFxuICAgICAgYFVQREFURSBwcm9qZWN0c1xuICAgICAgIFNFVCB0aXRsZSA9IEB0aXRsZSxcbiAgICAgICAgICAgZGVzY3JpcHRpb24gPSBAZGVzY3JpcHRpb24sXG4gICAgICAgICAgIHN0YWNrID0gQHN0YWNrLFxuICAgICAgICAgICBmZWF0dXJlcyA9IEBmZWF0dXJlcyxcbiAgICAgICAgICAgaW1hZ2VfcGF0aCA9IEBpbWFnZV9wYXRoLFxuICAgICAgICAgICB1cGRhdGVkX2F0ID0gZGF0ZXRpbWUoJ25vdycpXG4gICAgICAgV0hFUkUgaWQgPSBAaWRgLFxuICAgICkucnVuKHtcbiAgICAgIGlkLFxuICAgICAgdGl0bGU6IG5leHQudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogbmV4dC5kZXNjcmlwdGlvbixcbiAgICAgIHN0YWNrOiBuZXh0LnN0YWNrID8/IG51bGwsXG4gICAgICBmZWF0dXJlczogSlNPTi5zdHJpbmdpZnkobmV4dC5mZWF0dXJlcyA/PyBbXSksXG4gICAgICBpbWFnZV9wYXRoOiBuZXh0LmltYWdlUGF0aCA/PyBudWxsLFxuICAgIH0pO1xuXG4gICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuZ2V0KGlkKTtcbiAgICBpZiAoIXVwZGF0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCB1cGRhdGUgZmFpbGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVkO1xuICB9LFxuXG4gIGRlbGV0ZShpZDogbnVtYmVyKTogRGJQcm9qZWN0IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGRiLnByZXBhcmUoJ0RFTEVURSBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gPycpLnJ1bihpZCk7XG4gICAgcmV0dXJuIGV4aXN0aW5nO1xuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IHVzZXJEYiA9IHtcbiAgZ2V0QnlJZChpZDogbnVtYmVyKTogRGJVc2VyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByb3cgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGlkID0gPycpLmdldChpZCk7XG4gICAgcmV0dXJuIHJvdyA/IG5vcm1hbGlzZVVzZXIocm93KSA6IHVuZGVmaW5lZDtcbiAgfSxcblxuICBnZXRCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBEYlVzZXIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHJvdyA9IGRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSA/JykuZ2V0KGVtYWlsKTtcbiAgICByZXR1cm4gcm93ID8gbm9ybWFsaXNlVXNlcihyb3cpIDogdW5kZWZpbmVkO1xuICB9LFxuXG4gIGNyZWF0ZShlbWFpbDogc3RyaW5nLCBwYXNzd29yZEhhc2g6IHN0cmluZyk6IERiVXNlciB7XG4gICAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYElOU0VSVCBJTlRPIHVzZXJzIChlbWFpbCwgcGFzc3dvcmRfaGFzaCkgVkFMVUVTICg/LCA/KWApO1xuICAgIGNvbnN0IGluZm8gPSBzdG10LnJ1bihlbWFpbCwgcGFzc3dvcmRIYXNoKTtcbiAgICBjb25zdCByb3cgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGlkID0gPycpLmdldChOdW1iZXIoaW5mby5sYXN0SW5zZXJ0Um93aWQpKTtcbiAgICBpZiAoIXJvdykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIGNyZWF0aW9uIGZhaWxlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXNlVXNlcihyb3cpO1xuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IG1lc3NhZ2VEYiA9IHtcbiAgYWxsKCk6IERiTWVzc2FnZVtdIHtcbiAgICBjb25zdCByb3dzID0gZGIucHJlcGFyZSgnU0VMRUNUICogRlJPTSBtZXNzYWdlcyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnKS5hbGwoKTtcbiAgICByZXR1cm4gcm93cy5tYXAobm9ybWFsaXNlTWVzc2FnZSk7XG4gIH0sXG5cbiAgY3JlYXRlKGRhdGE6IFBpY2s8RGJNZXNzYWdlLCAnbmFtZScgfCAnZW1haWwnIHwgJ2NvbnRlbnQnPik6IERiTWVzc2FnZSB7XG4gICAgY29uc3QgaW5mbyA9IGRiXG4gICAgICAucHJlcGFyZShgSU5TRVJUIElOVE8gbWVzc2FnZXMgKG5hbWUsIGVtYWlsLCBjb250ZW50KSBWQUxVRVMgKEBuYW1lLCBAZW1haWwsIEBjb250ZW50KWApXG4gICAgICAucnVuKGRhdGEpO1xuICAgIGNvbnN0IHJvdyA9IGRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gbWVzc2FnZXMgV0hFUkUgaWQgPSA/JykuZ2V0KE51bWJlcihpbmZvLmxhc3RJbnNlcnRSb3dpZCkpO1xuICAgIGlmICghcm93KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lc3NhZ2UgY3JlYXRpb24gZmFpbGVkJyk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpc2VNZXNzYWdlKHJvdyk7XG4gIH0sXG5cbiAgZGVsZXRlKGlkOiBudW1iZXIpOiBEYk1lc3NhZ2UgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHJvdyA9IGRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gbWVzc2FnZXMgV0hFUkUgaWQgPSA/JykuZ2V0KGlkKTtcbiAgICBpZiAoIXJvdykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBkYi5wcmVwYXJlKCdERUxFVEUgRlJPTSBtZXNzYWdlcyBXSEVSRSBpZCA9ID8nKS5ydW4oaWQpO1xuICAgIHJldHVybiBub3JtYWxpc2VNZXNzYWdlKHJvdyk7XG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbImZzIiwicGF0aCIsIkRhdGFiYXNlIiwiZGJQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwid3JpdGVGaWxlU3luYyIsImRiIiwiZXhlYyIsIm5vcm1hbGlzZVJvdyIsInJvdyIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInN0YWNrIiwiZmVhdHVyZXMiLCJKU09OIiwicGFyc2UiLCJpbWFnZVBhdGgiLCJpbWFnZV9wYXRoIiwiY3JlYXRlZEF0IiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRfYXQiLCJub3JtYWxpc2VVc2VyIiwiZW1haWwiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwibm9ybWFsaXNlTWVzc2FnZSIsIm5hbWUiLCJjb250ZW50IiwicHJvamVjdERiIiwiYWxsIiwicm93cyIsInByZXBhcmUiLCJtYXAiLCJnZXQiLCJ1bmRlZmluZWQiLCJjcmVhdGUiLCJkYXRhIiwic3RtdCIsImZlYXR1cmVzSnNvbiIsInN0cmluZ2lmeSIsImluZm8iLCJydW4iLCJjcmVhdGVkIiwiTnVtYmVyIiwibGFzdEluc2VydFJvd2lkIiwiRXJyb3IiLCJ1cGRhdGUiLCJleGlzdGluZyIsIm5leHQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkIiwiZGVsZXRlIiwidXNlckRiIiwiZ2V0QnlJZCIsImdldEJ5RW1haWwiLCJtZXNzYWdlRGIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/semver","vendor-chunks/next","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/bcryptjs","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fadmin%2Flogin%2Froute&page=%2Fadmin%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fadmin%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cantoi%5Csource%5Crepos%5CPERSO-PROJECT%5CPERSO%5Cportfolio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();